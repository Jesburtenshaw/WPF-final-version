<UserControl x:Class="CDM.UserControls.CDMUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:converter="clr-namespace:CDM.Converters"
             xmlns:local="clr-namespace:CDM.UserControls"
             Unloaded="UserControl_Unloaded"
             Loaded="UserControl_Loaded"
             PreviewMouseDown="UserControl_PreviewMouseDown"
             PreviewKeyDown="UserControl_PreviewKeyDown"
             AllowDrop="True"
             DragEnter="UserControl_DragEnter"
             Drop="UserControl_Drop"
             mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/CDM;component\Themes\Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <!--<converter:ArrowPathConverter x:Key="ArrowPathConverter" />-->
            <converter:BoolVisibilityConverter x:Key="BoolVisibilityConverter" />
            <converter:BoolVisibilityInverseConverter x:Key="BoolVisibilityInverseConverter" />
            <converter:BoolInverseConverter x:Key="BoolInverseConverter" />
            <converter:DirFileTypeVisibilityConverter x:Key="DirFileTypeVisibilityConverter" />
            <converter:EmptyStringVisibilityConverter x:Key="EmptyStringVisibilityConverter" />
            <converter:EmptyStringVisibilityInverseConverter x:Key="EmptyStringVisibilityInverseConverter" />
            <converter:ZeroIntVisibilityConverter x:Key="ZeroIntVisibilityConverter" />
            <converter:ZeroIntVisibilityInverseConverter x:Key="ZeroIntVisibilityInverseConverter" />
        </ResourceDictionary>
    </UserControl.Resources>

    <!--<Grid Background="#484848">-->
    <Grid Background="{DynamicResource WindowBackgroundColor}">
        <Grid.RowDefinitions>
            <!--<RowDefinition Height="50" />-->
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--<Grid Grid.Row="0">
            <TextBlock FontSize="15"
                       Margin="70 0"
                       Foreground="{DynamicResource WindowForegroundColor}"
                       VerticalAlignment="Center"
                       Text="Open" />
        </Grid>-->

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--<Grid Grid.Column="0"
                  Margin="60 0 0 0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Button Grid.Row="0"
                        Height="40"
                        Margin="0 5"
                        Style="{StaticResource sidebarBtnStyle}">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal">
                            <Path Data="M 15 3 C 8.3844276 3 3 8.38443 3 15 C 3 21.61557 8.3844276 27 15 27 C 21.615572 27 27 21.61557 27 15 C 27 8.38443 21.615572 3 15 3 z M 15 5 C 20.534692 5 25 9.46531 25 15 C 25 20.53469 20.534692 25 15 25 C 9.4653079 25 5 20.53469 5 15 C 5 9.46531 9.4653079 5 15 5 z M 15 7 C 14.446 7 14 7.446 14 8 L 14 15 C 14 15.554 14.446 16 15 16 L 22 16 C 22.554 16 23 15.554 23 15 C 23 14.446 22.554 14 22 14 L 16 14 L 16 8 C 16 7.446 15.554 7 15 7 z "
                                  Width="30"
                                  Height="30"
                                  Margin="5,0,10,0"
                                  Style="{StaticResource IcnPathStyle}" />
                            <TextBlock FontSize="15"
                                       Foreground="{DynamicResource WindowForegroundColor}"
                                       VerticalAlignment="Center"
                                       Text="Recent" />
                        </StackPanel>
                    </Button.Content>
                </Button>

                <Border BorderThickness="1"
                        Grid.Row="1"
                        Style="{StaticResource SidebarBorder}">
                    <Button Grid.Row="1"
                            Height="58"
                            Style="{StaticResource sidebarBtnStyle}"
                            HorizontalContentAlignment="Left"
                            Width="Auto">
                        <Button.Content>
                            <StackPanel Margin="5 0 0 0"
                                        Orientation="Horizontal">
                                <Path Style="{StaticResource IcnPathStyle}"
                                      Width="25"
                                      Height="25"
                                      Data="M377.6 499.2C275.2 499.2 192 416 192 316.8s83.2-182.4 182.4-182.4 182.4 83.2 182.4 182.4-80 182.4-179.2 182.4z m0-300.8C310.4 198.4 256 249.6 256 316.8s54.4 118.4 118.4 118.4 118.4-54.4 118.4-118.4-51.2-118.4-115.2-118.4zM665.6 889.6H86.4c-38.4 0-70.4-32-70.4-70.4 0-124.8 121.6-307.2 307.2-307.2h99.2c188.8 0 307.2 182.4 307.2 307.2 6.4 38.4-25.6 70.4-64 70.4zM326.4 576c-147.2 0-243.2 147.2-243.2 243.2 0 3.2 3.2 6.4 6.4 6.4h579.2c3.2 0 6.4-3.2 6.4-6.4 0-96-96-243.2-243.2-243.2h-105.6z" />
                                <Path Style="{StaticResource IcnPathStyle}"
                                      Margin="-5 0 0 0"
                                      Width="15"
                                      Height="20"
                                      Data="M729.6 560c-80 0-147.2-64-147.2-147.2s64-147.2 147.2-147.2 147.2 64 147.2 147.2-67.2 147.2-147.2 147.2z m0-230.4c-44.8 0-83.2 35.2-83.2 83.2s35.2 83.2 83.2 83.2 83.2-35.2 83.2-83.2-38.4-83.2-83.2-83.2zM947.2 889.6h-134.4c-19.2 0-32-12.8-32-32s12.8-32 32-32h131.2c-3.2-70.4-73.6-172.8-176-172.8h-12.8c-19.2 0-32-12.8-32-32s12.8-32 32-32h12.8c147.2 0 240 144 240 240 0 35.2-28.8 60.8-60.8 60.8z" />

                                <TextBlock FontSize="15"
                                           Foreground="{DynamicResource WindowForegroundColor}"
                                           Margin="5 0 0 0"
                                           VerticalAlignment="Center"
                                           Text="Shared With Me" />
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </Border>

                <Separator Grid.Row="2"
                           Margin="10 5" />

                <Border BorderThickness="1"
                        Grid.Row="3"
                        Style="{StaticResource SidebarBorder}">
                    <Button Style="{StaticResource sidebarBtnStyle}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <Grid Margin="5 0 0 0">
                                    <Path Style="{StaticResource IcnPathStyle}"
                                          Width="30"
                                          Height="25"
                                          Data="M895.5 660.5L742 239.7l-0.1-0.4c-6.5-17.1-18-31.6-33-42-15.1-10.4-32.7-15.9-51-15.9h-313c-39 0-73.3 24.9-85.5 61.9l-0.1 0.2L128.2 661c-10.8 18-17 39-17 61.5 0 66.2 53.8 120 120 120h561.6c66.2 0 120-53.8 120-120 0-22.7-6.3-43.9-17.3-62zM306.8 258.9c5.5-16.4 20.7-27.4 38-27.4h313c16.4 0 31.4 10.3 37.3 25.6l127.4 349.1c-9.5-2.4-19.4-3.7-29.7-3.7H231.2c-11.7 0-23.1 1.7-33.8 4.8l109.4-348.4z m486 533.6H231.2c-38.6 0-70-31.4-70-70s31.4-70 70-70h561.6c38.6 0 70 31.4 70 70s-31.4 70-70 70z" />
                                    <Path Margin="0 -8 0 0"
                                          Width="10"
                                          Height="10"
                                          Style="{StaticResource IcnPathStyle}"
                                          Data="M331 543.3c16.1 15.2 37.1 23.6 59.3 23.6h224.3c28 0 54.3-10.9 74.1-30.7 20.6-20.6 31.7-49.1 30.6-78.2-1-27.3-12.6-52.8-32.7-71.7-14.5-13.8-32.4-23-51.6-26.9-9.8-58.3-60.9-102.9-122.2-102.9h-20.3c-33 0-63.9 12.8-87.2 36.1-23.3 23.4-36.1 54.4-36.1 87.3 0 6.5 0.5 13 1.5 19.3-15.5 3.5-29.8 11.3-41.3 22.8-16.5 16.6-25.6 39.5-24.8 62.9 0.7 22.3 10.1 43 26.4 58.4z m33.8-85.9c6.6-6.6 15.4-10.2 24.7-10.2 11 0 21.5-5.3 28-14.2 6.5-8.9 8.4-20.5 5.1-31.1-2.2-7.1-3.4-14.5-3.4-22 0-19.6 7.6-38 21.5-51.9 13.8-13.9 32.2-21.5 51.9-21.5h20.3c40.8 0 73.9 32.9 73.9 73.3v0.4c0 7.2 2.7 14 7.8 19.1 5.1 5.1 11.8 7.9 19 7.9 14.5 0 28.2 5.5 38.7 15.4 10.4 9.9 16.5 23.1 17 37.3 0.6 15.5-5.1 30-16 40.9-10.4 10.4-24.1 16.1-38.8 16.1H390.3c-19.1 0-35.1-15.1-35.7-33.6-0.4-9.8 3.3-19 10.2-25.9z" />
                                </Grid>


                                <StackPanel Orientation="Vertical">
                                    <TextBlock FontSize="15"
                                               Margin="10 0 10 0"
                                               Foreground="{DynamicResource WindowForegroundColor}"
                                               VerticalAlignment="Center"
                                               Text="CDM - IAM Cloud" />
                                    <TextBlock FontSize="12"
                                               Margin="10 0 10 0"
                                               Foreground="{DynamicResource WindowForegroundColor}"
                                               VerticalAlignment="Center"
                                               Text="Test.user@gmail.com" />
                                </StackPanel>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </Border>

                <Separator Grid.Row="4"
                           Margin="10 5" />

                <Border BorderThickness="1"
                        Grid.Row="5"
                        Style="{StaticResource SidebarBorder}">
                    <Button Grid.Row="5"
                            Style="{StaticResource sidebarBtnStyle}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">

                                <Grid Margin="5 0 10 0">
                                    <Path Style="{StaticResource IcnPathStyle}"
                                          Width="30"
                                          Height="25"
                                          Data="M895.5 660.5L742 239.7l-0.1-0.4c-6.5-17.1-18-31.6-33-42-15.1-10.4-32.7-15.9-51-15.9h-313c-39 0-73.3 24.9-85.5 61.9l-0.1 0.2L128.2 661c-10.8 18-17 39-17 61.5 0 66.2 53.8 120 120 120h561.6c66.2 0 120-53.8 120-120 0-22.7-6.3-43.9-17.3-62zM306.8 258.9c5.5-16.4 20.7-27.4 38-27.4h313c16.4 0 31.4 10.3 37.3 25.6l127.4 349.1c-9.5-2.4-19.4-3.7-29.7-3.7H231.2c-11.7 0-23.1 1.7-33.8 4.8l109.4-348.4z m486 533.6H231.2c-38.6 0-70-31.4-70-70s31.4-70 70-70h561.6c38.6 0 70 31.4 70 70s-31.4 70-70 70z" />
                                    <Path Style="{StaticResource IcnPathStyle}"
                                          Margin="0 -8 0 0"
                                          Width="10"
                                          Height="10"
                                          Data="M331 543.3c16.1 15.2 37.1 23.6 59.3 23.6h224.3c28 0 54.3-10.9 74.1-30.7 20.6-20.6 31.7-49.1 30.6-78.2-1-27.3-12.6-52.8-32.7-71.7-14.5-13.8-32.4-23-51.6-26.9-9.8-58.3-60.9-102.9-122.2-102.9h-20.3c-33 0-63.9 12.8-87.2 36.1-23.3 23.4-36.1 54.4-36.1 87.3 0 6.5 0.5 13 1.5 19.3-15.5 3.5-29.8 11.3-41.3 22.8-16.5 16.6-25.6 39.5-24.8 62.9 0.7 22.3 10.1 43 26.4 58.4z m33.8-85.9c6.6-6.6 15.4-10.2 24.7-10.2 11 0 21.5-5.3 28-14.2 6.5-8.9 8.4-20.5 5.1-31.1-2.2-7.1-3.4-14.5-3.4-22 0-19.6 7.6-38 21.5-51.9 13.8-13.9 32.2-21.5 51.9-21.5h20.3c40.8 0 73.9 32.9 73.9 73.3v0.4c0 7.2 2.7 14 7.8 19.1 5.1 5.1 11.8 7.9 19 7.9 14.5 0 28.2 5.5 38.7 15.4 10.4 9.9 16.5 23.1 17 37.3 0.6 15.5-5.1 30-16 40.9-10.4 10.4-24.1 16.1-38.8 16.1H390.3c-19.1 0-35.1-15.1-35.7-33.6-0.4-9.8 3.3-19 10.2-25.9z" />
                                </Grid>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock FontSize="15"
                                               Foreground="{DynamicResource WindowForegroundColor}"
                                               VerticalAlignment="Center"
                                               Text="OneDrive - IAM Cloud" />
                                    <TextBlock FontSize="12"
                                               Foreground="{DynamicResource WindowForegroundColor}"
                                               VerticalAlignment="Center"
                                               Text="Test.user@gmail.com" />
                                </StackPanel>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </Border>

                <Separator Grid.Row="6"
                           Margin="10 5" />

                <TextBlock Grid.Row="7"
                           Margin="0 0 0 5"
                           Foreground="{DynamicResource WindowForegroundColor}"
                           Text="Quick Access"
                           FontSize="15" />

                <Border Grid.Row="8"
                        Grid.Column="0"
                        CornerRadius="15">

                    -->
            <!--ItemsSource="{Binding DriveList}"-->
            <!--
                    <ListView Name="QuickAccessList"
                              BorderBrush="Transparent"
                              Background="Transparent"
                              HorizontalContentAlignment="Stretch"
                              ItemContainerStyle="{DynamicResource QuickAccessListViewItemStyle}"
                              ItemTemplate="{DynamicResource QuickAccessTemplateStyle}"
                              Grid.Row="2"
                              Grid.Column="0">

                    </ListView>
                </Border>

            </Grid>-->

            <Grid Grid.Column="1"
                  Margin="10 10 10 10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="60" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Border Grid.Row="0"
                        BorderBrush="#6b6b6b"
                        BorderThickness="0 0 0 2">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="30" />
                        </Grid.ColumnDefinitions>

                        <!--Style="{StaticResource MultiplyBtnStyle}"-->
                        <Button Grid.Column="0"
                                Style="{StaticResource backBtnStyle}"
                                Command="{Binding BackWindowCommand}">
                            <Path Data="M12 3C12.2652 3 12.5196 3.10536 12.7071 3.29289L19.7071 10.2929C20.0976 10.6834 20.0976 11.3166 19.7071 11.7071C19.3166 12.0976 18.6834 12.0976 18.2929 11.7071L13 6.41421V20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20V6.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L11.2929 3.29289C11.4804 3.10536 11.7348 3 12 3Z"
                                  Height="40"
                                  Width="40"
                                  Style="{DynamicResource IcnPathStyle}"
                                  Margin="9 9 0 0"
                                  Fill="#666666" />
                            <!--<Image Height="30"
                                   Width="30"
                                   Source="Resources/icnUpArrow.png"
                                   VerticalAlignment="Stretch"
                                   HorizontalAlignment="Stretch" />-->
                        </Button>

                        <Grid Grid.Column="1"
                              Visibility="{Binding Offline,Converter={StaticResource BoolVisibilityInverseConverter}}"
                              Margin="10 0 0 0">
                            <Path Style="{StaticResource IcnPathStyle}"
                                  Width="30"
                                  Height="25"
                                  Data="M895.5 660.5L742 239.7l-0.1-0.4c-6.5-17.1-18-31.6-33-42-15.1-10.4-32.7-15.9-51-15.9h-313c-39 0-73.3 24.9-85.5 61.9l-0.1 0.2L128.2 661c-10.8 18-17 39-17 61.5 0 66.2 53.8 120 120 120h561.6c66.2 0 120-53.8 120-120 0-22.7-6.3-43.9-17.3-62zM306.8 258.9c5.5-16.4 20.7-27.4 38-27.4h313c16.4 0 31.4 10.3 37.3 25.6l127.4 349.1c-9.5-2.4-19.4-3.7-29.7-3.7H231.2c-11.7 0-23.1 1.7-33.8 4.8l109.4-348.4z m486 533.6H231.2c-38.6 0-70-31.4-70-70s31.4-70 70-70h561.6c38.6 0 70 31.4 70 70s-31.4 70-70 70z" />
                            <!--<Path Style="{DynamicResource IcnPathStyle}"  Width="30" Data="M735 722m-34 0a34 34 0 1 0 68 0 34 34 0 1 0-68 0Z" />-->
                            <Path Style="{StaticResource IcnPathStyle}"
                                  Margin="0 -8 0 0"
                                  Width="10"
                                  Height="10"
                                  Data="M331 543.3c16.1 15.2 37.1 23.6 59.3 23.6h224.3c28 0 54.3-10.9 74.1-30.7 20.6-20.6 31.7-49.1 30.6-78.2-1-27.3-12.6-52.8-32.7-71.7-14.5-13.8-32.4-23-51.6-26.9-9.8-58.3-60.9-102.9-122.2-102.9h-20.3c-33 0-63.9 12.8-87.2 36.1-23.3 23.4-36.1 54.4-36.1 87.3 0 6.5 0.5 13 1.5 19.3-15.5 3.5-29.8 11.3-41.3 22.8-16.5 16.6-25.6 39.5-24.8 62.9 0.7 22.3 10.1 43 26.4 58.4z m33.8-85.9c6.6-6.6 15.4-10.2 24.7-10.2 11 0 21.5-5.3 28-14.2 6.5-8.9 8.4-20.5 5.1-31.1-2.2-7.1-3.4-14.5-3.4-22 0-19.6 7.6-38 21.5-51.9 13.8-13.9 32.2-21.5 51.9-21.5h20.3c40.8 0 73.9 32.9 73.9 73.3v0.4c0 7.2 2.7 14 7.8 19.1 5.1 5.1 11.8 7.9 19 7.9 14.5 0 28.2 5.5 38.7 15.4 10.4 9.9 16.5 23.1 17 37.3 0.6 15.5-5.1 30-16 40.9-10.4 10.4-24.1 16.1-38.8 16.1H390.3c-19.1 0-35.1-15.1-35.7-33.6-0.4-9.8 3.3-19 10.2-25.9z" />
                        </Grid>
                        <Grid Grid.Column="1"
                              Visibility="{Binding Offline,Converter={StaticResource BoolVisibilityConverter}}"
                              Margin="10 0 0 0">
                            <Path Style="{StaticResource IcnPathStyle}"
                                  Width="30"
                                  Height="25"
                                  Fill="#E6B6B4"
                                  Data="M895.5 660.5L742 239.7l-0.1-0.4c-6.5-17.1-18-31.6-33-42-15.1-10.4-32.7-15.9-51-15.9h-313c-39 0-73.3 24.9-85.5 61.9l-0.1 0.2L128.2 661c-10.8 18-17 39-17 61.5 0 66.2 53.8 120 120 120h561.6c66.2 0 120-53.8 120-120 0-22.7-6.3-43.9-17.3-62zM306.8 258.9c5.5-16.4 20.7-27.4 38-27.4h313c16.4 0 31.4 10.3 37.3 25.6l127.4 349.1c-9.5-2.4-19.4-3.7-29.7-3.7H231.2c-11.7 0-23.1 1.7-33.8 4.8l109.4-348.4z m486 533.6H231.2c-38.6 0-70-31.4-70-70s31.4-70 70-70h561.6c38.6 0 70 31.4 70 70s-31.4 70-70 70z" />
                            <!--<Path Style="{DynamicResource IcnPathStyle}"  Width="30" Data="M735 722m-34 0a34 34 0 1 0 68 0 34 34 0 1 0-68 0Z" />-->
                            <Path Style="{StaticResource IcnPathStyle}"
                                  Margin="0 -8 0 0"
                                  Width="10"
                                  Height="10"
                                  Fill="#E6B6B4"
                                  Data="M331 543.3c16.1 15.2 37.1 23.6 59.3 23.6h224.3c28 0 54.3-10.9 74.1-30.7 20.6-20.6 31.7-49.1 30.6-78.2-1-27.3-12.6-52.8-32.7-71.7-14.5-13.8-32.4-23-51.6-26.9-9.8-58.3-60.9-102.9-122.2-102.9h-20.3c-33 0-63.9 12.8-87.2 36.1-23.3 23.4-36.1 54.4-36.1 87.3 0 6.5 0.5 13 1.5 19.3-15.5 3.5-29.8 11.3-41.3 22.8-16.5 16.6-25.6 39.5-24.8 62.9 0.7 22.3 10.1 43 26.4 58.4z m33.8-85.9c6.6-6.6 15.4-10.2 24.7-10.2 11 0 21.5-5.3 28-14.2 6.5-8.9 8.4-20.5 5.1-31.1-2.2-7.1-3.4-14.5-3.4-22 0-19.6 7.6-38 21.5-51.9 13.8-13.9 32.2-21.5 51.9-21.5h20.3c40.8 0 73.9 32.9 73.9 73.3v0.4c0 7.2 2.7 14 7.8 19.1 5.1 5.1 11.8 7.9 19 7.9 14.5 0 28.2 5.5 38.7 15.4 10.4 9.9 16.5 23.1 17 37.3 0.6 15.5-5.1 30-16 40.9-10.4 10.4-24.1 16.1-38.8 16.1H390.3c-19.1 0-35.1-15.1-35.7-33.6-0.4-9.8 3.3-19 10.2-25.9z" />
                        </Grid>

                        <StackPanel Orientation="Horizontal"
                                    Grid.Column="2">
                            <TextBlock Text="CDM - IAM Cloud"
                                       Foreground="{DynamicResource WindowForegroundColor}"
                                       VerticalAlignment="Center"
                                       Margin="8 0 0 0"
                                       FontSize="20"></TextBlock>
                            <TextBlock Text="(CDM Error)"
                                       Visibility="{Binding Offline,Converter={StaticResource BoolVisibilityConverter}}"
                                       Foreground="#E6B6B4"
                                       VerticalAlignment="Center"
                                       Margin="8 0 0 0"
                                       FontSize="20"></TextBlock>
                            <TextBlock Text=">"
                                       Visibility="{Binding CurSearchStatus.Title,Converter={StaticResource EmptyStringVisibilityConverter}}"
                                       Foreground="{DynamicResource WindowForegroundColor}"
                                       VerticalAlignment="Center"
                                       Margin="8 0 0 0"
                                       FontSize="20"></TextBlock>
                            <TextBlock Text="{Binding CurSearchStatus.Title}"
                                       Visibility="{Binding CurSearchStatus.Title,Converter={StaticResource EmptyStringVisibilityConverter}}"
                                       Foreground="{DynamicResource WindowForegroundColor}"
                                       VerticalAlignment="Center"
                                       Margin="8 0 0 0"
                                       FontSize="20"></TextBlock>
                            <TextBlock Text="Loading..."
                                       Visibility="{Binding CurSearchStatus.IsLoading,Converter={StaticResource BoolVisibilityConverter}}"
                                       Foreground="{DynamicResource WindowForegroundColor}"
                                       VerticalAlignment="Center"
                                       Margin="8 0 0 0"
                                       FontSize="12"
                                       FontWeight="Thin"></TextBlock>
                        </StackPanel>

                        <Grid Grid.Column="3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0"
                                  Visibility="{Binding CurFolder.Type, Converter={StaticResource DirFileTypeVisibilityConverter}}">
                                <Button x:Name="btnStar"
                                        ToolTip="Set this item as default"
                                        Command="{Binding StarCommand}"
                                        CommandParameter="{Binding CurFolder}"
                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                        Visibility="{Binding CurFolder.IsDefault, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                        BorderThickness="0"
                                        Margin="0 0 5 0"
                                        Width="20"
                                        Height="20">
                                    <Path Data="M98 193 c-8 -17 -25 -30 -45 -35 -38 -10 -41 -18 -12 -43 14 -13 19
-29 17 -50 -3 -27 0 -30 22 -27 31 3 49 3 80 0 22 -3 25 0 22 27 -2 21 3 37
17 50 29 25 26 33 -11 43 -21 5 -38 18 -46 35 -7 15 -17 27 -22 27 -5 0 -15
-12 -22 -27z m37 -23 c3 -11 17 -23 31 -26 24 -6 24 -7 8 -25 -11 -12 -14 -27
-10 -45 6 -23 5 -25 -11 -19 -10 4 -25 8 -33 8 -8 0 -23 -4 -33 -8 -16 -6 -17
-4 -11 19 4 18 1 33 -10 45 -16 18 -16 19 8 25 14 3 28 15 31 26 3 11 10 20
15 20 5 0 12 -9 15 -20z"
                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                          Height="20"
                                          Width="20"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <RotateTransform Angle="45"
                                                             CenterX="8"
                                                             CenterY="10"></RotateTransform>
                                        </Path.RenderTransform>
                                    </Path>
                                </Button>
                                <Button x:Name="btnUnstar"
                                        ToolTip="Unset this item as default"
                                        Command="{Binding UnstarCommand}"
                                        CommandParameter="{Binding CurFolder}"
                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                        Visibility="{Binding CurFolder.IsDefault, Converter={StaticResource BoolVisibilityConverter}}"
                                        BorderThickness="0"
                                        Margin="0 0 5 0"
                                        Width="20"
                                        Height="20">
                                    <Path Data="M293 588 c-4 -7 -20 -46 -34 -88 l-26 -75 -85 -3 c-134 -4 -144 -43
-32 -125 49 -36 64 -53 59 -65 -3 -9 -16 -49 -27 -89 -18 -59 -19 -74 -9 -87
22 -26 43 -19 114 35 l67 52 67 -52 c71 -54 92 -61 114 -35 10 13 9 28 -9 87
-11 40 -24 80 -27 89 -5 12 10 29 59 65 112 82 102 121 -32 125 l-85 3 -26 75
c-31 91 -37 100 -61 100 -10 0 -22 -6 -27 -12z"
                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                          Height="20"
                                          Width="20"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <RotateTransform Angle="45"
                                                             CenterX="8"
                                                             CenterY="10"></RotateTransform>
                                        </Path.RenderTransform>
                                    </Path>
                                </Button>
                            </Grid>
                            <Grid Grid.Column="0"
                                  Visibility="Collapsed">
                                <Button x:Name="btnPin"
                                        ToolTip="Pin this item to the list"
                                        Command="{Binding PinCommand}"
                                        CommandParameter="{Binding CurFolder}"
                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                        Visibility="{Binding CurFolder.IsPined, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                        BorderThickness="0"
                                        Margin="0 0 5 0"
                                        Width="20"
                                        Height="20">
                                    <Path Data="M124 212 c-6 -4 -19 -22 -28 -39 -9 -18 -22 -33 -29 -33 -6 0 -19 -4
             -27 -10 -12 -7 -11 -12 5 -29 18 -21 18 -22 -5 -46 -30 -32 -17 -45 15 -15 24
             23 25 23 46 5 17 -16 22 -17 29 -5 6 8 10 21 10 28 0 7 16 20 35 29 55 26 55
             58 -1 102 -29 23 -34 24 -50 13z m50 -41 c32 -33 29 -43 -13 -61 -17 -7 -33
             -21 -37 -32 -6 -19 -7 -18 -35 8 -28 27 -29 29 -11 37 11 5 26 24 35 43 9 19
             20 34 25 34 5 0 21 -13 36 -29z"
                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                          Height="20"
                                          Width="20"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <RotateTransform Angle="270"
                                                             CenterX="9"
                                                             CenterY="10"></RotateTransform>
                                        </Path.RenderTransform>
                                    </Path>
                                </Button>
                                <Button x:Name="btnUnpin"
                                        ToolTip="Unpin this item from the list"
                                        Command="{Binding UnpinCommand}"
                                        CommandParameter="{Binding CurFolder}"
                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                        Visibility="{Binding CurFolder.IsPined, Converter={StaticResource BoolVisibilityConverter}}"
                                        BorderThickness="0"
                                        Margin="0 0 5 0"
                                        Width="20"
                                        Height="20">
                                    <Path Data="M 1.5,1.5 C 11.426,9.75698 20.7593,18.757 29.5,28.5C 28.9984,29.521 28.3317,29.6877 27.5,29C 24.6667,26.1667 21.8333,23.3333 19,20.5C 18.2881,22.8474 17.1214,24.8474 15.5,26.5C 13.8333,25.1667 12.1667,23.8333 10.5,22.5C 2.5,29.1667 1.83333,28.5 8.5,20.5C 7.16667,18.8333 5.83333,17.1667 4.5,15.5C 6.15263,13.8786 8.15263,12.7119 10.5,12C 6.89259,8.90231 3.89259,5.40231 1.5,1.5 Z M 11.5,14.5 C 16.469,15.7763 17.469,18.443 14.5,22.5C 12.1667,20.8333 10.1667,18.8333 8.5,16.5C 9.60164,15.8243 10.6016,15.1577 11.5,14.5 Z
               M 15.5,3.5 C 16.8734,3.34332 18.2068,3.50999 19.5,4C 22,6.5 24.5,9 27,11.5C 27.8234,15.1992 26.3234,17.5325 22.5,18.5C 21.6919,18.1924 21.0253,17.6924 20.5,17C 22.0614,16.059 23.3947,14.8924 24.5,13.5C 22.4519,10.2568 19.7852,8.09009 16.5,7C 15.7894,8.25471 14.956,9.42138 14,10.5C 13.6667,10.1667 13.3333,9.83333 13,9.5C 12.9717,7.21343 13.805,5.21343 15.5,3.5 Z"
                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                          Height="20"
                                          Width="20"
                                          Stretch="Uniform" />
                                </Button>
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>

                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <Border BorderBrush="{DynamicResource SeachBoxBorderColor}"
                                Background="{DynamicResource SeachBoxBackgroundColor}"
                                BorderThickness="1 1 0 1"
                                CornerRadius="3,0,0,3"
                                Height="40"
                                Grid.Column="0">
                            <Grid>
                                <TextBlock Text="Search"
                                           Visibility="{Binding IsSearchBoxPlaceholderVisible}"
                                           VerticalAlignment="Center"
                                           Margin="26 0 0 0"
                                           FontSize="16"
                                           Foreground="{DynamicResource SeachBoxPlaceHolderColor}" />
                                <!--Foreground="#444444"-->

                                <TextBox x:Name="txtSearchBox"
                                         Grid.Column="1"
                                         CaretBrush="Black"
                                         IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                         Text="{Binding TxtSearchBoxItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         Style="{StaticResource txtSearchBoxStyle}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="TextChanged">
                                            <i:InvokeCommandAction Command="{Binding SearchBoxTextChangedCommand}"></i:InvokeCommandAction>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="GotFocus">
                                            <i:InvokeCommandAction Command="{Binding TxtSearchGotFocusCommand}" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="LostFocus">
                                            <i:InvokeCommandAction Command="{Binding TxtSearchLostFocusCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <TextBox.InputBindings>
                                        <KeyBinding Key="Enter"
                                                    Command="{Binding DoSearchCommand}" />
                                    </TextBox.InputBindings>
                                </TextBox>

                                <Popup Name="tipSearchError"
                                       IsOpen="{Binding CurSearchStatus.IsError}"
                                       PlacementTarget="{Binding ElementName=txtSearchBox}"
                                       Placement="Bottom"
                                       VerticalOffset="-1">
                                    <Border Margin="0 0 0 0"
                                            BorderThickness="1"
                                            BorderBrush="#6b6b6b"
                                            CornerRadius="3"
                                            Width="400"
                                            Height="30"
                                            VerticalAlignment="Stretch"
                                            HorizontalAlignment="Stretch"
                                            Background="{DynamicResource WindowBackgroundColor}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="{Binding CurSearchStatus.Desc}"
                                                       Grid.Column="0"
                                                       Name="txtSearchError"
                                                       Foreground="#E6B6B4"
                                                       Padding="5">
                                            </TextBlock>
                                            <Button Grid.Column="1"
                                                    Command="{Binding ClearSearchErrorCommand}"
                                                    Background="Transparent"
                                                    BorderThickness="1"
                                                    Cursor="Hand"
                                                    Foreground="{DynamicResource WindowForegroundColor}">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <TextBlock VerticalAlignment="Center"
                                                                   Text="×"
                                                                   FontSize="20"
                                                                   FontWeight="Thin">
                                                        </TextBlock>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>

                        <Border BorderBrush="{DynamicResource SeachBoxBorderColor}"
                                Background="{DynamicResource SeachBoxBackgroundColor}"
                                BorderThickness="0 1 0 1"
                                Grid.Column="1"
                                Height="40"
                                Width="20"
                                HorizontalAlignment="Right"
                                ClipToBounds="True"
                                CornerRadius="0,0,0,0"
                                Visibility="{Binding TxtSearchBoxItem, Converter={StaticResource EmptyStringVisibilityConverter}}">
                            <Button IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                    Command="{Binding ClearSearchCommand}"
                                    Background="Transparent"
                                    BorderThickness="1"
                                    Cursor="Hand"
                                    Foreground="{DynamicResource WindowForegroundColor}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <TextBlock Text="×"
                                                   FontSize="30"
                                                   FontWeight="Thin">
                                        </TextBlock>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Border>

                        <Border BorderBrush="{DynamicResource SeachBoxBorderColor}"
                                Background="{DynamicResource SeachBoxBackgroundColor}"
                                Visibility="{Binding IsDriveWindowVisible}"
                                BorderThickness="0 1 1 1"
                                Grid.Column="2"
                                Height="40"
                                Width="40"
                                HorizontalAlignment="Right"
                                ClipToBounds="True"
                                CornerRadius="0,3,3,0">
                            <Button x:Name="purchasedBookSearchBtn"
                                    IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                    Command="{Binding DoSearchCommand}"
                                    Style="{StaticResource btnSearch}">
                                <!--<Image Source="/Resources/icnsearch.png"
                                           Height="14"
                                           Width="14">
                                    </Image>-->
                                <Path Data="M0,203.25c0,112.1,91.2,203.2,203.2,203.2c51.6,0,98.8-19.4,134.7-51.2l129.5,129.5c2.4,2.4,5.5,3.6,8.7,3.6
			    s6.3-1.2,8.7-3.6c4.8-4.8,4.8-12.5,0-17.3l-129.6-129.5c31.8-35.9,51.2-83,51.2-134.7c0-112.1-91.2-203.2-203.2-203.2
			    S0,91.15,0,203.25z M381.9,203.25c0,98.5-80.2,178.7-178.7,178.7s-178.7-80.2-178.7-178.7s80.2-178.7,178.7-178.7
			    S381.9,104.65,381.9,203.25z"
                                      Stretch="Uniform"
                                      Height="14"
                                      Style="{StaticResource IcnPathStyle}" />
                            </Button>
                        </Border>
                        <Border BorderBrush="{DynamicResource SeachBoxBorderColor}"
                                Background="{DynamicResource SeachBoxBackgroundColor}"
                                Visibility="{Binding IsDriveFoldersVisible}"
                                BorderThickness="0 1 0 1"
                                Grid.Column="2"
                                Height="40"
                                Width="40"
                                HorizontalAlignment="Right"
                                ClipToBounds="True"
                                CornerRadius="0,0,0,0">
                            <Button IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                    Command="{Binding DoSearchCommand}"
                                    Style="{StaticResource btnSearch}">
                                <!--<Image Source="/Resources/icnsearch.png"
                           Height="14"
                           Width="14">
                    </Image>-->
                                <Path Data="M0,203.25c0,112.1,91.2,203.2,203.2,203.2c51.6,0,98.8-19.4,134.7-51.2l129.5,129.5c2.4,2.4,5.5,3.6,8.7,3.6
s6.3-1.2,8.7-3.6c4.8-4.8,4.8-12.5,0-17.3l-129.6-129.5c31.8-35.9,51.2-83,51.2-134.7c0-112.1-91.2-203.2-203.2-203.2
S0,91.15,0,203.25z M381.9,203.25c0,98.5-80.2,178.7-178.7,178.7s-178.7-80.2-178.7-178.7s80.2-178.7,178.7-178.7
S381.9,104.65,381.9,203.25z"
                                      Stretch="Uniform"
                                      Height="14"
                                      Style="{StaticResource IcnPathStyle}" />
                            </Button>
                        </Border>

                        <Border BorderBrush="{DynamicResource SeachBoxBorderColor}"
                                Background="{DynamicResource SeachBoxBackgroundColor}"
                                Visibility="{Binding IsDriveFoldersVisible}"
                                BorderThickness="0 1 1 1"
                                Grid.Column="3"
                                Height="40"
                                Width="20"
                                HorizontalAlignment="Right"
                                ClipToBounds="True"
                                CornerRadius="0,3,3,0">
                            <Grid>
                                <Button IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                        Visibility="{Binding CurFilterStatus.ShowLocations, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                        Command="{Binding ShowLocationsCommand}"
                                        Background="Transparent"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Style="{StaticResource btnSearch}"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Text="∨"
                                                       FontSize="22"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Name="btnLocations"
                                        IsEnabled="{Binding CurSearchStatus.CanSearch}"
                                        Visibility="{Binding CurFilterStatus.ShowLocations, Converter={StaticResource BoolVisibilityConverter}}"
                                        Command="{Binding ShowLocationsCommand}"
                                        Background="Transparent"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Style="{StaticResource btnSearch}"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Text="∧"
                                                       FontSize="22"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Popup Name="popupLocations"
                                       IsOpen="{Binding CurFilterStatus.ShowLocations}"
                                       PlacementTarget="{Binding ElementName=btnLocations}"
                                       Placement="Bottom"
                                       VerticalOffset="-1">
                                    <Border Margin="0 0 0 0"
                                            BorderThickness="0"
                                            BorderBrush="#6b6b6b"
                                            CornerRadius="3"
                                            Width="130"
                                            Height="Auto"
                                            VerticalAlignment="Stretch"
                                            HorizontalAlignment="Stretch">
                                        <ListView SelectionMode="Single"
                                                  FontSize="16"
                                                  ItemsSource="{Binding Locations}"
                                                  SelectedItem="{Binding SelectedLocation,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                  Background="{DynamicResource WindowBackgroundColor}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Foreground="{DynamicResource WindowForegroundColor}"
                                                               VerticalAlignment="Center"
                                                               Text="{Binding Name}"></TextBlock>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>
                    </Grid>

                    <StackPanel Orientation="Horizontal"
                                Grid.Column="1">
                        <TextBlock Text="Searching..."
                                   Margin="5,0,0,0"
                                   VerticalAlignment="Center"
                                   Visibility="{Binding CurSearchStatus.IsDoing, Converter={StaticResource BoolVisibilityConverter}}"
                                   Foreground="{DynamicResource WindowForegroundColor}">
                        </TextBlock>
                        <Button Margin="5,0,0,0"
                                Visibility="{Binding CurSearchStatus.IsDoing, Converter={StaticResource BoolVisibilityConverter}}"
                                Command="{Binding CancelSearchCommand}"
                                Background="Transparent"
                                VerticalAlignment="Center"
                                BorderThickness="0"
                                Cursor="Hand"
                                Foreground="{DynamicResource WindowForegroundColor}">
                            <Button.Template>
                                <ControlTemplate>
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Cancel"
                                               FontSize="12"
                                               Foreground="#A0B8EC"
                                               FontWeight="Thin">
                                    </TextBlock>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>

                <!--Mainwindow-->
                <Grid Grid.Row="2"
                      Name="DriveWindow"
                      Visibility="{Binding IsDriveWindowVisible}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40*" />
                        <RowDefinition Height="36" />
                        <RowDefinition Height="60*" />
                    </Grid.RowDefinitions>
                    <!--Visibility="{Binding IsAvailableBooksVisibility}"-->
                    <Border Grid.Row="0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Margin="0,0,0,10"
                                       Grid.Row="0"
                                       Text="We didn't find anything to show here."
                                       FontWeight="Thin"
                                       FontSize="14"
                                       Visibility="{Binding CurFilterStatus.DrivesCount, Converter={StaticResource ZeroIntVisibilityInverseConverter}}"
                                       Foreground="{DynamicResource WindowForegroundColor}">
                            </TextBlock>
                            <!--Style="{StaticResource BookListViewStyle}"-->
                            <ListView ItemTemplate="{StaticResource DriveTemplateStyle}"
                                      Grid.Row="0"
                                      ItemsSource="{Binding PagedDrivesList,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      ItemContainerStyle="{StaticResource driveListViewItemStyle}"
                                      VerticalAlignment="Top"
                                      BorderBrush="Transparent"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                                      SelectedItem="{Binding DriveSelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      Background="Transparent"
                                      SelectionMode="Single">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="MouseDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding DoubleClickCommand, Mode=TwoWay}"
                                                               CommandParameter="{Binding SelectedItem, RelativeSource={RelativeSource AncestorType=ListView}}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>

                                <ListView.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Height="Auto"
                                                   Margin="0" />
                                        <!--<UniformGrid Columns="4"
                                                 VerticalAlignment="Top"
                                                 HorizontalAlignment="Stretch" />-->
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>
                            </ListView>
                            <!--<Image gif:ImageBehavior.AnimatedSource="/CDM;component/Resources/loading.gif"
                                   Grid.Row="1" HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Visibility="{Binding CurSearchStatus.IsLoadingDrives,Converter={StaticResource BoolVisibilityConverter}}"
                                   Width="40" Height="8" Margin="0,10,0,10" />-->
                        </Grid>
                    </Border>

                    <StackPanel Grid.Row="1"
                                Height="36"
                                Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button x:Name="Left"
                                Command="{Binding PrevDrivesCommand}"
                                Visibility="{Binding IsFirstDrivesPage,Converter={StaticResource BoolVisibilityInverseConverter}}"
                                Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                BorderThickness="0"
                                Margin="0 0 5 0"
                                Width="36"
                                Height="36">
                            <Path Data="M297.813333 491.648l1.365334-1.749333 379.093333-376.149334a38.784 38.784 0 0 1 5.077333-4.096 34.346667 34.346667 0 0 1 14.293334-4.992c2.218667-0.170667 2.176-0.170667 4.394666-0.170666a33.493333 33.493333 0 0 1 14.549334 4.181333c12.330667 6.997333 18.688 21.76 15.274666 35.498667-1.237333 5.077333-7.04 13.44-7.04 13.44l-355.498666 352.853333 354.090666 354.389333s6.272 7.978667 7.893334 12.928a32.213333 32.213333 0 0 1-33.749334 41.557334c-6.656-0.682667-17.749333-7.68-17.749333-7.68l-379.221333-377.984-1.28-1.450667a30.378667 30.378667 0 0 1-7.893334-17.749333 31.018667 31.018667 0 0 1 3.712-18.602667 27.221333 27.221333 0 0 1 2.688-4.224z"
                                  Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                  Height="20"
                                  Width="20"
                                  Stretch="Uniform" />
                        </Button>
                        <!--Content="&lt;"-->

                        <!--Content="&gt;"-->
                        <Button x:Name="Right"
                                Command="{Binding NextDrivesCommand}"
                                Visibility="{Binding IsLastDrivesPage,Converter={StaticResource BoolVisibilityInverseConverter}}"
                                Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                BorderThickness="0"
                                Width="36"
                                Height="36">
                            <Path Data="M290.909091 983.272727a29.090909 29.090909 0 0 1-20.596364-49.570909L689.92 512l-418.909091-421.701818a29.090909 29.090909 0 0 1 41.309091-40.96l439.505455 442.181818a29.090909 29.090909 0 0 1 0 40.96l-439.505455 442.181818a28.974545 28.974545 0 0 1-21.410909 8.610909z"
                                  Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                  Height="20"
                                  Width="20"
                                  Stretch="Uniform" />
                        </Button>

                    </StackPanel>

                    <Border Grid.Row="2"
                            BorderBrush="Transparent"
                            Background="Transparent">

                        <TabControl BorderThickness="0"
                                    Background="Transparent">
                            <TabControl.Resources>

                            </TabControl.Resources>

                            <TabItem Name="RecentTabItem"
                                     Style="{StaticResource TabItemStyle}"
                                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                                     Header="Recent">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <TextBlock Margin="20,10,0,0"
                                               Grid.Row="0"
                                               Text="We didn't find anything to show here."
                                               FontWeight="Thin"
                                               FontSize="14"
                                               Visibility="{Binding CurFilterStatus.RecentCount, Converter={StaticResource ZeroIntVisibilityInverseConverter}}"
                                               Foreground="{DynamicResource WindowForegroundColor}">
                                    </TextBlock>
                                    <DataGrid x:Name="ListOfRecentItems"
                                              Grid.Row="0"
                                              AllowDrop="True"
                                              Visibility="{Binding CurFilterStatus.RecentCount, Converter={StaticResource ZeroIntVisibilityConverter}}"
                                              ItemsSource="{Binding RecentItemList}"
                                              SelectedItem="{Binding SelectedRecentItem}"
                                              ColumnHeaderStyle="{StaticResource DGHeaderStyle}"
                                              RowStyle="{StaticResource DGRowStyle}"
                                              CellStyle="{StaticResource DGCellStyle}"
                                              Style="{StaticResource DGStyle}"
                                              SelectionMode="Single"
                                              SelectionUnit="FullRow">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="MouseDoubleClick">
                                                <i:InvokeCommandAction Command="{Binding RecentItemDoubleClickCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn MinWidth="80"
                                                                    Width="auto">
                                                <DataGridTemplateColumn.Header>
                                                    <Grid>
                                                        <Path Margin="20 0"
                                                              Height="20"
                                                              Width="20"
                                                              Style="{StaticResource IcnPathStyle}"
                                                              Data="M491.683,213.34H470.35v-64c0-11.782-9.551-21.333-21.333-21.333H406.35V21.34c0-11.782-9.551-21.333-21.333-21.333
				H107.683c-11.782,0-21.333,9.551-21.333,21.333v42.667h-64c-11.782,0-21.333,9.551-21.333,21.333v404.74
				c-0.028,0.943,0.001,1.878,0.097,2.8c0,0.004,0.001,0.008,0.001,0.012c0.045,0.426,0.102,0.849,0.172,1.269
				c1.206,8.272,6.649,13.9,13.286,16.394c0.103,0.04,0.208,0.078,0.312,0.117c0.26,0.093,0.517,0.189,0.78,0.273
				c1.035,0.339,2.109,0.598,3.215,0.777c0.043,0.007,0.086,0.013,0.13,0.02c0.451,0.07,0.908,0.126,1.37,0.168
				c0.179,0.017,0.357,0.036,0.536,0.049c0.129,0.008,0.26,0.011,0.389,0.017c0.586,0.033,1.172,0.044,1.758,0.032H406.35
				c9.182,0,17.335-5.876,20.239-14.587l85.333-256C516.526,227.605,506.244,213.34,491.683,213.34z M427.683,170.673v42.667H406.35
				v-42.667H427.683z M129.016,42.673h234.667V149.34v64H129.016v-128V42.673z M43.683,106.673H86.35v124.538l-42.667,128V106.673z
				 M390.974,469.34H51.948l34.533-103.6l36.578-109.733h261.957h64h13.068L390.974,469.34z" />
                                                    </Grid>
                                                </DataGridTemplateColumn.Header>

                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Image Width="40"
                                                               Height="30"
                                                               Margin="0 0 5 0"
                                                               Source="{Binding IconSource}"
                                                               HorizontalAlignment="Center" />

                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>

                                            <!--<DataGridTemplateColumn Width="*"
                                                                HeaderStyle="{StaticResource DGCustomizedHeaderStyle}"
                                                                CanUserSort="True"
                                                                SortMemberPath="Name"
                                                                MinWidth="250">
                                            <DataGridTemplateColumn.Header>
                                                -->
                                            <!--<Button HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"
                                                        Command="{Binding RecentItemSortCommand}">-->
                                            <!--
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="Name"
                                                                   FontSize="15"
                                                                   Foreground="White" />
                                                    <Path Data="M468.2752 33.0752l-307.2 307.2c-9.984 9.984-9.984 26.2144 0 36.1984s26.2144 9.984 36.1984 0l263.4752-263.4752 0 834.2016c0 14.1312 11.4688 25.6 25.6 25.6s25.6-11.4688 25.6-25.6l0-834.2016 263.4752 263.4752c9.984 9.984 26.2144 9.984 36.1984 0 5.0176-5.0176 7.4752-11.5712 7.4752-18.1248s-2.5088-13.1072-7.4752-18.1248l-307.2-307.2c-9.984-9.984-26.2144-9.984-36.1984 0z"
                                                          Fill="White"
                                                          Margin="10 0 0 0"
                                                          Height="20"
                                                          Width="15"
                                                          Stretch="UniformToFill">
                                                        <Path.Style>
                                                            <Style TargetType="Path">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding IsAscending}" />
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Path.Style>
                                                        -->
                                            <!--<Path.RenderTransform>
                                                            <RotateTransform Angle="180" />
                                                        </Path.RenderTransform>-->
                                            <!--
                                                    </Path>
                                                </StackPanel>
                                                -->
                                            <!--</Button>-->
                                            <!--
                                            </DataGridTemplateColumn.Header>

                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Foreground="White"
                                                               VerticalAlignment="Center"
                                                               Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>-->

                                            <DataGridTextColumn Width="*"
                                                                MinWidth="250"
                                                                Header="Name"
                                                                ElementStyle="{StaticResource Centering}"
                                                                Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <DataGridTemplateColumn MinWidth="80"
                                                                    Width="auto">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition></ColumnDefinition>
                                                                <ColumnDefinition></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <Grid Grid.Column="0"
                                                                  Visibility="{Binding Type, Converter={StaticResource DirFileTypeVisibilityConverter}}">
                                                                <Button x:Name="btnStar"
                                                                        ToolTip="Set this item as default"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.StarCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M98 193 c-8 -17 -25 -30 -45 -35 -38 -10 -41 -18 -12 -43 14 -13 19
-29 17 -50 -3 -27 0 -30 22 -27 31 3 49 3 80 0 22 -3 25 0 22 27 -2 21 3 37
17 50 29 25 26 33 -11 43 -21 5 -38 18 -46 35 -7 15 -17 27 -22 27 -5 0 -15
-12 -22 -27z m37 -23 c3 -11 17 -23 31 -26 24 -6 24 -7 8 -25 -11 -12 -14 -27
-10 -45 6 -23 5 -25 -11 -19 -10 4 -25 8 -33 8 -8 0 -23 -4 -33 -8 -16 -6 -17
-4 -11 19 4 18 1 33 -10 45 -16 18 -16 19 8 25 14 3 28 15 31 26 3 11 10 20
15 20 5 0 12 -9 15 -20z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="45"
                                                                                             CenterX="8"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                                <Button x:Name="btnUnstar"
                                                                        ToolTip="Unset this item as default"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnstarCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M293 588 c-4 -7 -20 -46 -34 -88 l-26 -75 -85 -3 c-134 -4 -144 -43
-32 -125 49 -36 64 -53 59 -65 -3 -9 -16 -49 -27 -89 -18 -59 -19 -74 -9 -87
22 -26 43 -19 114 35 l67 52 67 -52 c71 -54 92 -61 114 -35 10 13 9 28 -9 87
-11 40 -24 80 -27 89 -5 12 10 29 59 65 112 82 102 121 -32 125 l-85 3 -26 75
c-31 91 -37 100 -61 100 -10 0 -22 -6 -27 -12z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="45"
                                                                                             CenterX="8"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                            </Grid>
                                                            <Grid Grid.Column="1">
                                                                <Button x:Name="btnPin"
                                                                        ToolTip="Pin this item to the list"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.PinCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M124 212 c-6 -4 -19 -22 -28 -39 -9 -18 -22 -33 -29 -33 -6 0 -19 -4
             -27 -10 -12 -7 -11 -12 5 -29 18 -21 18 -22 -5 -46 -30 -32 -17 -45 15 -15 24
             23 25 23 46 5 17 -16 22 -17 29 -5 6 8 10 21 10 28 0 7 16 20 35 29 55 26 55
             58 -1 102 -29 23 -34 24 -50 13z m50 -41 c32 -33 29 -43 -13 -61 -17 -7 -33
             -21 -37 -32 -6 -19 -7 -18 -35 8 -28 27 -29 29 -11 37 11 5 26 24 35 43 9 19
             20 34 25 34 5 0 21 -13 36 -29z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="270"
                                                                                             CenterX="9"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                                <Button x:Name="btnUnpin"
                                                                        ToolTip="Unpin this item from the list"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnpinCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M 1.5,1.5 C 11.426,9.75698 20.7593,18.757 29.5,28.5C 28.9984,29.521 28.3317,29.6877 27.5,29C 24.6667,26.1667 21.8333,23.3333 19,20.5C 18.2881,22.8474 17.1214,24.8474 15.5,26.5C 13.8333,25.1667 12.1667,23.8333 10.5,22.5C 2.5,29.1667 1.83333,28.5 8.5,20.5C 7.16667,18.8333 5.83333,17.1667 4.5,15.5C 6.15263,13.8786 8.15263,12.7119 10.5,12C 6.89259,8.90231 3.89259,5.40231 1.5,1.5 Z M 11.5,14.5 C 16.469,15.7763 17.469,18.443 14.5,22.5C 12.1667,20.8333 10.1667,18.8333 8.5,16.5C 9.60164,15.8243 10.6016,15.1577 11.5,14.5 Z
               M 15.5,3.5 C 16.8734,3.34332 18.2068,3.50999 19.5,4C 22,6.5 24.5,9 27,11.5C 27.8234,15.1992 26.3234,17.5325 22.5,18.5C 21.6919,18.1924 21.0253,17.6924 20.5,17C 22.0614,16.059 23.3947,14.8924 24.5,13.5C 22.4519,10.2568 19.7852,8.09009 16.5,7C 15.7894,8.25471 14.956,9.42138 14,10.5C 13.6667,10.1667 13.3333,9.83333 13,9.5C 12.9717,7.21343 13.805,5.21343 15.5,3.5 Z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform" />
                                                                </Button>
                                                            </Grid>
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>

                                            <DataGridTextColumn Width="Auto"
                                                                MinWidth="250"
                                                                Header="Date modified"
                                                                ElementStyle="{StaticResource Centering}"
                                                                Binding="{Binding LastModifiedDateTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </DataGrid.Columns>
                                        <DataGrid.ContextMenu>
                                            <ContextMenu StaysOpen="False">
                                                <MenuItem Header="Open"
                                                          Command="{Binding OpenItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Copy path to clipboard"
                                                          Command="{Binding CopyItemPathCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Rename"
                                                          Command="{Binding RenameItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Delete"
                                                          Command="{Binding DeleteItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                            </ContextMenu>
                                        </DataGrid.ContextMenu>
                                    </DataGrid>
                                    <!--<Image gif:ImageBehavior.AnimatedSource="/CDM;component/Resources/loading.gif"
                                       Grid.Row="1" HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Visibility="{Binding CurSearchStatus.IsLoadingRecent,Converter={StaticResource BoolVisibilityConverter}}"
                                       Width="40" Height="8" Margin="0,10,0,10" />-->
                                </Grid>
                            </TabItem>

                            <TabItem Name="PinnedTabItem"
                                     Style="{StaticResource TabItemStyle}"
                                     Header="Pinned">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                        <RowDefinition Height="*"></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <TextBlock Margin="20,10,0,0"
                                               Grid.Row="0"
                                               Text="We didn't find anything to show here."
                                               FontWeight="Thin"
                                               FontSize="14"
                                               Visibility="{Binding CurFilterStatus.PinnedCount, Converter={StaticResource ZeroIntVisibilityInverseConverter}}"
                                               Foreground="{DynamicResource WindowForegroundColor}">
                                    </TextBlock>
                                    <DataGrid x:Name="ListOfPinnedItems"
                                              AllowDrop="True"
                                              Visibility="{Binding CurFilterStatus.PinnedCount, Converter={StaticResource ZeroIntVisibilityConverter}}"
                                              Grid.Row="1"
                                              ItemsSource="{Binding PinnedItemList}"
                                              SelectedItem="{Binding SelectedPinnedItem}"
                                              ColumnHeaderStyle="{StaticResource DGHeaderStyle}"
                                              RowStyle="{StaticResource DGRowStyle}"
                                              CellStyle="{StaticResource DGCellStyle}"
                                              Style="{StaticResource DGStyle}"
                                              SelectionMode="Single"
                                              SelectionUnit="FullRow">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="MouseDoubleClick">
                                                <i:InvokeCommandAction Command="{Binding PinnedItemDoubleClickCommand}"
                                                                       CommandParameter="{Binding ElementName=ListOfPinnedItems, Path=SelectedItem}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>

                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn MinWidth="80"
                                                                    Width="auto">
                                                <DataGridTemplateColumn.Header>
                                                    <Grid>
                                                        <Path Margin="20 0"
                                                              Height="20"
                                                              Width="20"
                                                              Style="{StaticResource IcnPathStyle}"
                                                              Data="M491.683,213.34H470.35v-64c0-11.782-9.551-21.333-21.333-21.333H406.35V21.34c0-11.782-9.551-21.333-21.333-21.333
H107.683c-11.782,0-21.333,9.551-21.333,21.333v42.667h-64c-11.782,0-21.333,9.551-21.333,21.333v404.74
c-0.028,0.943,0.001,1.878,0.097,2.8c0,0.004,0.001,0.008,0.001,0.012c0.045,0.426,0.102,0.849,0.172,1.269
c1.206,8.272,6.649,13.9,13.286,16.394c0.103,0.04,0.208,0.078,0.312,0.117c0.26,0.093,0.517,0.189,0.78,0.273
c1.035,0.339,2.109,0.598,3.215,0.777c0.043,0.007,0.086,0.013,0.13,0.02c0.451,0.07,0.908,0.126,1.37,0.168
c0.179,0.017,0.357,0.036,0.536,0.049c0.129,0.008,0.26,0.011,0.389,0.017c0.586,0.033,1.172,0.044,1.758,0.032H406.35
c9.182,0,17.335-5.876,20.239-14.587l85.333-256C516.526,227.605,506.244,213.34,491.683,213.34z M427.683,170.673v42.667H406.35
v-42.667H427.683z M129.016,42.673h234.667V149.34v64H129.016v-128V42.673z M43.683,106.673H86.35v124.538l-42.667,128V106.673z
 M390.974,469.34H51.948l34.533-103.6l36.578-109.733h261.957h64h13.068L390.974,469.34z" />
                                                    </Grid>
                                                </DataGridTemplateColumn.Header>
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Image Width="40"
                                                               Height="30"
                                                               Margin="0 0 5 0"
                                                               Source="{Binding IconSource}"
                                                               HorizontalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>

                                            <DataGridTextColumn Width="*"
                                                                MinWidth="250"
                                                                Header="Name"
                                                                ElementStyle="{StaticResource Centering}"
                                                                Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <DataGridTemplateColumn MinWidth="80"
                                                                    Width="auto">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition></ColumnDefinition>
                                                                <ColumnDefinition></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <Grid Grid.Column="0"
                                                                  Visibility="{Binding Type, Converter={StaticResource DirFileTypeVisibilityConverter}}">
                                                                <Button x:Name="btnStar"
                                                                        ToolTip="Set this item as default"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.StarCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M98 193 c-8 -17 -25 -30 -45 -35 -38 -10 -41 -18 -12 -43 14 -13 19
-29 17 -50 -3 -27 0 -30 22 -27 31 3 49 3 80 0 22 -3 25 0 22 27 -2 21 3 37
17 50 29 25 26 33 -11 43 -21 5 -38 18 -46 35 -7 15 -17 27 -22 27 -5 0 -15
-12 -22 -27z m37 -23 c3 -11 17 -23 31 -26 24 -6 24 -7 8 -25 -11 -12 -14 -27
-10 -45 6 -23 5 -25 -11 -19 -10 4 -25 8 -33 8 -8 0 -23 -4 -33 -8 -16 -6 -17
-4 -11 19 4 18 1 33 -10 45 -16 18 -16 19 8 25 14 3 28 15 31 26 3 11 10 20
15 20 5 0 12 -9 15 -20z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="45"
                                                                                             CenterX="8"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                                <Button x:Name="btnUnstar"
                                                                        ToolTip="Unset this item as default"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnstarCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M293 588 c-4 -7 -20 -46 -34 -88 l-26 -75 -85 -3 c-134 -4 -144 -43
-32 -125 49 -36 64 -53 59 -65 -3 -9 -16 -49 -27 -89 -18 -59 -19 -74 -9 -87
22 -26 43 -19 114 35 l67 52 67 -52 c71 -54 92 -61 114 -35 10 13 9 28 -9 87
-11 40 -24 80 -27 89 -5 12 10 29 59 65 112 82 102 121 -32 125 l-85 3 -26 75
c-31 91 -37 100 -61 100 -10 0 -22 -6 -27 -12z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="45"
                                                                                             CenterX="8"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                            </Grid>
                                                            <Grid Grid.Column="1">
                                                                <Button x:Name="btnPin"
                                                                        ToolTip="Pin this item to the list"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.PinCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M124 212 c-6 -4 -19 -22 -28 -39 -9 -18 -22 -33 -29 -33 -6 0 -19 -4
             -27 -10 -12 -7 -11 -12 5 -29 18 -21 18 -22 -5 -46 -30 -32 -17 -45 15 -15 24
             23 25 23 46 5 17 -16 22 -17 29 -5 6 8 10 21 10 28 0 7 16 20 35 29 55 26 55
             58 -1 102 -29 23 -34 24 -50 13z m50 -41 c32 -33 29 -43 -13 -61 -17 -7 -33
             -21 -37 -32 -6 -19 -7 -18 -35 8 -28 27 -29 29 -11 37 11 5 26 24 35 43 9 19
             20 34 25 34 5 0 21 -13 36 -29z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform">
                                                                        <Path.RenderTransform>
                                                                            <RotateTransform Angle="270"
                                                                                             CenterX="9"
                                                                                             CenterY="10"></RotateTransform>
                                                                        </Path.RenderTransform>
                                                                    </Path>
                                                                </Button>
                                                                <Button x:Name="btnUnpin"
                                                                        ToolTip="Unpin this item from the list"
                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnpinCommand}"
                                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityConverter}}"
                                                                        BorderThickness="0"
                                                                        Margin="0 0 5 0"
                                                                        Width="20"
                                                                        Height="20">
                                                                    <Path Data="M 1.5,1.5 C 11.426,9.75698 20.7593,18.757 29.5,28.5C 28.9984,29.521 28.3317,29.6877 27.5,29C 24.6667,26.1667 21.8333,23.3333 19,20.5C 18.2881,22.8474 17.1214,24.8474 15.5,26.5C 13.8333,25.1667 12.1667,23.8333 10.5,22.5C 2.5,29.1667 1.83333,28.5 8.5,20.5C 7.16667,18.8333 5.83333,17.1667 4.5,15.5C 6.15263,13.8786 8.15263,12.7119 10.5,12C 6.89259,8.90231 3.89259,5.40231 1.5,1.5 Z M 11.5,14.5 C 16.469,15.7763 17.469,18.443 14.5,22.5C 12.1667,20.8333 10.1667,18.8333 8.5,16.5C 9.60164,15.8243 10.6016,15.1577 11.5,14.5 Z
               M 15.5,3.5 C 16.8734,3.34332 18.2068,3.50999 19.5,4C 22,6.5 24.5,9 27,11.5C 27.8234,15.1992 26.3234,17.5325 22.5,18.5C 21.6919,18.1924 21.0253,17.6924 20.5,17C 22.0614,16.059 23.3947,14.8924 24.5,13.5C 22.4519,10.2568 19.7852,8.09009 16.5,7C 15.7894,8.25471 14.956,9.42138 14,10.5C 13.6667,10.1667 13.3333,9.83333 13,9.5C 12.9717,7.21343 13.805,5.21343 15.5,3.5 Z"
                                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                                          Height="20"
                                                                          Width="20"
                                                                          Stretch="Uniform" />
                                                                </Button>
                                                            </Grid>
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>

                                            <DataGridTextColumn Width="Auto"
                                                                MinWidth="250"
                                                                Header="Date modified"
                                                                ElementStyle="{StaticResource Centering}"
                                                                Binding="{Binding LastModifiedDateTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </DataGrid.Columns>
                                        <DataGrid.ContextMenu>
                                            <ContextMenu StaysOpen="False">
                                                <MenuItem Header="Open"
                                                          Command="{Binding OpenItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Copy path to clipboard"
                                                          Command="{Binding CopyItemPathCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Rename"
                                                          Command="{Binding RenameItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                                <MenuItem Header="Delete"
                                                          Command="{Binding DeleteItemCommand}"
                                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                                          Height="35" />
                                            </ContextMenu>
                                        </DataGrid.ContextMenu>
                                    </DataGrid>
                                    <!--<Image gif:ImageBehavior.AnimatedSource="/CDM;component/Resources/loading.gif"
                                       Grid.Row="2" HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Visibility="{Binding CurSearchStatus.IsLoadingPinned,Converter={StaticResource BoolVisibilityConverter}}"
                                       Width="40" Height="8" Margin="0,10,0,10" />-->
                                </Grid>
                            </TabItem>
                        </TabControl>
                    </Border>
                </Grid>

                <!--Second Windows-->
                <Grid Grid.Row="2"
                      Name="DriveFoldersWindow"
                      Visibility="{Binding IsDriveFoldersVisible}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Border BorderBrush="#6b6b6b"
                            BorderThickness="0 2 0 2"
                            Grid.Row="0"
                            Visibility="{Binding CurSearchStatus.Searched, Converter={StaticResource BoolVisibilityConverter}}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal"
                                        Grid.Column="0">
                                <TextBlock VerticalAlignment="Center"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Text="Results for: "
                                           Foreground="{DynamicResource WindowForegroundColor}"></TextBlock>
                                <Button x:Name="btnSearchFlag"
                                        Cursor="Arrow"
                                        Foreground="#A0B8EC"
                                        FontSize="16"
                                        FontWeight="Bold"
                                        Width="30"
                                        Style="{StaticResource btnSearch}">
                                    <Path Data="M0,203.25c0,112.1,91.2,203.2,203.2,203.2c51.6,0,98.8-19.4,134.7-51.2l129.5,129.5c2.4,2.4,5.5,3.6,8.7,3.6
            s6.3-1.2,8.7-3.6c4.8-4.8,4.8-12.5,0-17.3l-129.6-129.5c31.8-35.9,51.2-83,51.2-134.7c0-112.1-91.2-203.2-203.2-203.2
            S0,91.15,0,203.25z M381.9,203.25c0,98.5-80.2,178.7-178.7,178.7s-178.7-80.2-178.7-178.7s80.2-178.7,178.7-178.7
            S381.9,104.65,381.9,203.25z"
                                          Stretch="Uniform"
                                          Height="14"
                                          Style="{StaticResource IcnPathStyle}" />
                                </Button>
                                <TextBlock MaxWidth="500"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           Text="{Binding TxtSearchBoxItem}"
                                           FontWeight="Bold"
                                           Foreground="#A0B8EC"
                                           ToolTip="{Binding TxtSearchBoxItem}"></TextBlock>
                                <Button Command="{Binding ClearSearchCommand}"
                                        Background="Transparent"
                                        FontSize="16"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Margin="5,0,5,0"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock Text="×"
                                                       FontSize="30"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal"
                                        Grid.Column="1">
                                <TextBlock Text="{Binding CurFilterStatus.CurDrives}"
                                           Name="tbDrives"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource WindowForegroundColor}"></TextBlock>
                                <Button Visibility="{Binding CurFilterStatus.ShowDrives, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                        Command="{Binding ShowDrivesCommand}"
                                        Background="Transparent"
                                        FontSize="16"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Margin="3,0,20,0"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="∨"
                                                       FontSize="16"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Visibility="{Binding CurFilterStatus.ShowDrives, Converter={StaticResource BoolVisibilityConverter}}"
                                        Command="{Binding ShowDrivesCommand}"
                                        Background="Transparent"
                                        FontSize="16"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Margin="3,0,20,0"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="∧"
                                                       FontSize="16"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Popup Name="popupDrives"
                                       IsOpen="{Binding CurFilterStatus.ShowDrives}"
                                       PlacementTarget="{Binding ElementName=tbDrives}"
                                       Placement="Bottom"
                                       VerticalOffset="-1">
                                    <Border Margin="0 0 0 0"
                                            BorderThickness="0"
                                            BorderBrush="#6b6b6b"
                                            CornerRadius="3"
                                            Width="110"
                                            Height="Auto"
                                            VerticalAlignment="Stretch"
                                            HorizontalAlignment="Stretch">
                                        <ListView SelectionMode="Multiple"
                                                  FontSize="16"
                                                  ItemsSource="{Binding Drives,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                  Background="{DynamicResource WindowBackgroundColor}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox IsChecked="{Binding IsSelected,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                              Foreground="{DynamicResource WindowForegroundColor}"
                                                              VerticalAlignment="Center"
                                                              VerticalContentAlignment="Center"
                                                              Content="{Binding Name}"></CheckBox>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </Border>
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MouseEnter">
                                            <i:InvokeCommandAction Command="{Binding ShowDrivesCommand}"
                                                                   CommandParameter="MouseEnter" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseLeave">
                                            <i:InvokeCommandAction Command="{Binding ShowDrivesCommand}"
                                                                   CommandParameter="MouseLeave" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseDown">
                                            <i:InvokeCommandAction Command="{Binding ShowDrivesCommand}"
                                                                   CommandParameter="MouseDown" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Popup>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal"
                                        Grid.Column="2">
                                <TextBlock Name="tbTypes"
                                           Text="{Binding CurFilterStatus.CurType}"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource WindowForegroundColor}"></TextBlock>
                                <Button Visibility="{Binding CurFilterStatus.ShowTypes, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                        Command="{Binding ShowTypesCommand}"
                                        Background="Transparent"
                                        FontSize="16"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Margin="3,0,20,0"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="∨"
                                                       FontSize="16"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Visibility="{Binding CurFilterStatus.ShowTypes, Converter={StaticResource BoolVisibilityConverter}}"
                                        Command="{Binding ShowTypesCommand}"
                                        Background="Transparent"
                                        FontSize="16"
                                        BorderThickness="1"
                                        Cursor="Hand"
                                        Margin="3,0,20,0"
                                        Foreground="{DynamicResource WindowForegroundColor}">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="∧"
                                                       FontSize="16"
                                                       FontWeight="Thin">
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Popup Name="popupTypes"
                                       IsOpen="{Binding CurFilterStatus.ShowTypes}"
                                       PlacementTarget="{Binding ElementName=tbTypes}"
                                       Placement="Bottom"
                                       VerticalOffset="-1">
                                    <Border Margin="0 0 0 0"
                                            BorderThickness="0"
                                            BorderBrush="#6b6b6b"
                                            CornerRadius="3"
                                            Width="110"
                                            Height="Auto"
                                            VerticalAlignment="Stretch"
                                            HorizontalAlignment="Stretch">
                                        <ListView SelectionMode="Single"
                                                  FontSize="16"
                                                  ItemsSource="{Binding Types}"
                                                  SelectedItem="{Binding SelectedType,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                  Background="{DynamicResource WindowBackgroundColor}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Foreground="{DynamicResource WindowForegroundColor}"
                                                               VerticalAlignment="Center"
                                                               Text="{Binding Name}"></TextBlock>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </Border>
                                </Popup>
                            </StackPanel>
                            <Button Grid.Column="3"
                                    Command="{Binding ResetFilterCommand}"
                                    Background="Transparent"
                                    FontSize="16"
                                    BorderThickness="1"
                                    Cursor="Hand"
                                    Margin="0,0,0,0"
                                    Foreground="{DynamicResource WindowForegroundColor}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <TextBlock Text="↺"
                                                   FontSize="30"
                                                   FontWeight="Thin">
                                        </TextBlock>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Grid>
                    </Border>
                    <TextBlock Margin="0,10,0,0"
                               Grid.Row="1"
                               Text="We didn't find anything to show here."
                               FontWeight="Thin"
                               FontSize="14"
                               Visibility="{Binding CurFilterStatus.ItemsCount, Converter={StaticResource ZeroIntVisibilityInverseConverter}}"
                               Foreground="{DynamicResource WindowForegroundColor}">
                    </TextBlock>
                    <DataGrid x:Name="ListOfDriveItems"
                              Grid.Row="2"
                              ItemsSource="{Binding FoldersItemList}"
                              Visibility="{Binding CurFilterStatus.ItemsCount, Converter={StaticResource ZeroIntVisibilityConverter}}"
                              SelectedItem="{Binding SelectedFileFolderItem,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                              ColumnHeaderStyle="{StaticResource DGHeaderStyle}"
                              RowStyle="{StaticResource DGRowStyle}"
                              CellStyle="{StaticResource DGCellStyle}"
                              Style="{StaticResource DGStyle}"
                              SelectionMode="Single"
                              SelectionUnit="FullRow"
                              AllowDrop="True">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseDoubleClick">
                                <i:InvokeCommandAction Command="{Binding FolderItemDoubleClickCommand}" />
                            </i:EventTrigger>
                            <i:EventTrigger EventName="DragLeave">
                                <i:InvokeCommandAction Command="{Binding FolderItemDoubleClickCommand}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <DataGrid.Columns>
                            <DataGridTemplateColumn MinWidth="70"
                                                    Width="auto">
                                <DataGridTemplateColumn.Header>
                                    <Grid>
                                        <Path Margin="25 0 0 0"
                                              Height="15"
                                              Width="15"
                                              Style="{StaticResource IcnPathStyle}"
                                              Data="M491.683,213.34H470.35v-64c0-11.782-9.551-21.333-21.333-21.333H406.35V21.34c0-11.782-9.551-21.333-21.333-21.333
H107.683c-11.782,0-21.333,9.551-21.333,21.333v42.667h-64c-11.782,0-21.333,9.551-21.333,21.333v404.74
c-0.028,0.943,0.001,1.878,0.097,2.8c0,0.004,0.001,0.008,0.001,0.012c0.045,0.426,0.102,0.849,0.172,1.269
c1.206,8.272,6.649,13.9,13.286,16.394c0.103,0.04,0.208,0.078,0.312,0.117c0.26,0.093,0.517,0.189,0.78,0.273
c1.035,0.339,2.109,0.598,3.215,0.777c0.043,0.007,0.086,0.013,0.13,0.02c0.451,0.07,0.908,0.126,1.37,0.168
c0.179,0.017,0.357,0.036,0.536,0.049c0.129,0.008,0.26,0.011,0.389,0.017c0.586,0.033,1.172,0.044,1.758,0.032H406.35
c9.182,0,17.335-5.876,20.239-14.587l85.333-256C516.526,227.605,506.244,213.34,491.683,213.34z M427.683,170.673v42.667H406.35
v-42.667H427.683z M129.016,42.673h234.667V149.34v64H129.016v-128V42.673z M43.683,106.673H86.35v124.538l-42.667,128V106.673z
 M390.974,469.34H51.948l34.533-103.6l36.578-109.733h261.957h64h13.068L390.974,469.34z" />
                                    </Grid>
                                </DataGridTemplateColumn.Header>

                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Height="25"
                                               Width="25"
                                               Source="{Binding IconSource}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!--ElementStyle="{StaticResource Centering}"-->
                            <DataGridTextColumn Width="*"
                                                MinWidth="250"
                                                x:Name="sort"
                                                Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <DataGridTextColumn.Header>
                                    <StackPanel Orientation="Horizontal"
                                                MouseDown="DataGridTextColumn_MouseDown">
                                        <TextBlock Text="Name"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,10,0" />
                                        <Path x:Name="SortArrow"
                                              Width="10"
                                              Height="10"
                                              Data="M 0 10 L 5 0 L 10 10 Z"
                                              Fill="Black"
                                              VerticalAlignment="Center" />
                                        <Button Grid.Column="3"
                                                Command="{Binding ResetFilterCommand}"
                                                Background="Transparent"
                                                FontSize="20"
                                                BorderThickness="1"
                                                Cursor="Hand"
                                                VerticalAlignment="Center"
                                                Margin="10,0,0,0"
                                                Foreground="{DynamicResource WindowForegroundColor}">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <TextBlock Text="↺"
                                                               FontSize="25"
                                                               FontWeight="Thin" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                </DataGridTextColumn.Header>
                            </DataGridTextColumn>

                            <!--<DataGridTextColumn Width="*"
                                                MinWidth="250"
                                                Header="Name"
                                                ElementStyle="{StaticResource Centering}"
                                                Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />-->

                            <DataGridTemplateColumn MinWidth="80"
                                                    Width="auto">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition></ColumnDefinition>
                                                <ColumnDefinition></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <Grid Grid.Column="0"
                                                  Visibility="{Binding Type, Converter={StaticResource DirFileTypeVisibilityConverter}}">
                                                <Button x:Name="btnStar"
                                                        ToolTip="Set this item as default"
                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.StarCommand}"
                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                        BorderThickness="0"
                                                        Margin="0 0 5 0"
                                                        Width="20"
                                                        Height="20">
                                                    <Path Data="M98 193 c-8 -17 -25 -30 -45 -35 -38 -10 -41 -18 -12 -43 14 -13 19
-29 17 -50 -3 -27 0 -30 22 -27 31 3 49 3 80 0 22 -3 25 0 22 27 -2 21 3 37
17 50 29 25 26 33 -11 43 -21 5 -38 18 -46 35 -7 15 -17 27 -22 27 -5 0 -15
-12 -22 -27z m37 -23 c3 -11 17 -23 31 -26 24 -6 24 -7 8 -25 -11 -12 -14 -27
-10 -45 6 -23 5 -25 -11 -19 -10 4 -25 8 -33 8 -8 0 -23 -4 -33 -8 -16 -6 -17
-4 -11 19 4 18 1 33 -10 45 -16 18 -16 19 8 25 14 3 28 15 31 26 3 11 10 20
15 20 5 0 12 -9 15 -20z"
                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                          Height="20"
                                                          Width="20"
                                                          Stretch="Uniform">
                                                        <Path.RenderTransform>
                                                            <RotateTransform Angle="45"
                                                                             CenterX="8"
                                                                             CenterY="10"></RotateTransform>
                                                        </Path.RenderTransform>
                                                    </Path>
                                                </Button>
                                                <Button x:Name="btnUnstar"
                                                        ToolTip="Unset this item as default"
                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnstarCommand}"
                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                        Visibility="{Binding IsDefault, Converter={StaticResource BoolVisibilityConverter}}"
                                                        BorderThickness="0"
                                                        Margin="0 0 5 0"
                                                        Width="20"
                                                        Height="20">
                                                    <Path Data="M293 588 c-4 -7 -20 -46 -34 -88 l-26 -75 -85 -3 c-134 -4 -144 -43
-32 -125 49 -36 64 -53 59 -65 -3 -9 -16 -49 -27 -89 -18 -59 -19 -74 -9 -87
22 -26 43 -19 114 35 l67 52 67 -52 c71 -54 92 -61 114 -35 10 13 9 28 -9 87
-11 40 -24 80 -27 89 -5 12 10 29 59 65 112 82 102 121 -32 125 l-85 3 -26 75
c-31 91 -37 100 -61 100 -10 0 -22 -6 -27 -12z"
                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                          Height="20"
                                                          Width="20"
                                                          Stretch="Uniform">
                                                        <Path.RenderTransform>
                                                            <RotateTransform Angle="45"
                                                                             CenterX="8"
                                                                             CenterY="10"></RotateTransform>
                                                        </Path.RenderTransform>
                                                    </Path>
                                                </Button>
                                            </Grid>
                                            <Grid Grid.Column="1">
                                                <Button x:Name="btnPin"
                                                        ToolTip="Pin this item to the list"
                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.PinCommand}"
                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                                        BorderThickness="0"
                                                        Margin="0 0 5 0"
                                                        Width="20"
                                                        Height="20">
                                                    <Path Data="M124 212 c-6 -4 -19 -22 -28 -39 -9 -18 -22 -33 -29 -33 -6 0 -19 -4
             -27 -10 -12 -7 -11 -12 5 -29 18 -21 18 -22 -5 -46 -30 -32 -17 -45 15 -15 24
             23 25 23 46 5 17 -16 22 -17 29 -5 6 8 10 21 10 28 0 7 16 20 35 29 55 26 55
             58 -1 102 -29 23 -34 24 -50 13z m50 -41 c32 -33 29 -43 -13 -61 -17 -7 -33
             -21 -37 -32 -6 -19 -7 -18 -35 8 -28 27 -29 29 -11 37 11 5 26 24 35 43 9 19
             20 34 25 34 5 0 21 -13 36 -29z"
                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                          Height="20"
                                                          Width="20"
                                                          Stretch="Uniform">
                                                        <Path.RenderTransform>
                                                            <RotateTransform Angle="270"
                                                                             CenterX="9"
                                                                             CenterY="10"></RotateTransform>
                                                        </Path.RenderTransform>
                                                    </Path>
                                                </Button>
                                                <Button x:Name="btnUnpin"
                                                        ToolTip="Unpin this item from the list"
                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.UnpinCommand}"
                                                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=DataContext}"
                                                        Background="{DynamicResource DriveNavigationBtnBackgrounfColor}"
                                                        Visibility="{Binding IsPined, Converter={StaticResource BoolVisibilityConverter}}"
                                                        BorderThickness="0"
                                                        Margin="0 0 5 0"
                                                        Width="20"
                                                        Height="20">
                                                    <Path Data="M 1.5,1.5 C 11.426,9.75698 20.7593,18.757 29.5,28.5C 28.9984,29.521 28.3317,29.6877 27.5,29C 24.6667,26.1667 21.8333,23.3333 19,20.5C 18.2881,22.8474 17.1214,24.8474 15.5,26.5C 13.8333,25.1667 12.1667,23.8333 10.5,22.5C 2.5,29.1667 1.83333,28.5 8.5,20.5C 7.16667,18.8333 5.83333,17.1667 4.5,15.5C 6.15263,13.8786 8.15263,12.7119 10.5,12C 6.89259,8.90231 3.89259,5.40231 1.5,1.5 Z M 11.5,14.5 C 16.469,15.7763 17.469,18.443 14.5,22.5C 12.1667,20.8333 10.1667,18.8333 8.5,16.5C 9.60164,15.8243 10.6016,15.1577 11.5,14.5 Z
               M 15.5,3.5 C 16.8734,3.34332 18.2068,3.50999 19.5,4C 22,6.5 24.5,9 27,11.5C 27.8234,15.1992 26.3234,17.5325 22.5,18.5C 21.6919,18.1924 21.0253,17.6924 20.5,17C 22.0614,16.059 23.3947,14.8924 24.5,13.5C 22.4519,10.2568 19.7852,8.09009 16.5,7C 15.7894,8.25471 14.956,9.42138 14,10.5C 13.6667,10.1667 13.3333,9.83333 13,9.5C 12.9717,7.21343 13.805,5.21343 15.5,3.5 Z"
                                                          Fill="{DynamicResource DriveNavigationBtnIcnPath}"
                                                          Height="20"
                                                          Width="20"
                                                          Stretch="Uniform" />
                                                </Button>
                                            </Grid>
                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Width="Auto"
                                                MinWidth="250"
                                                Header="Date modified"
                                                ElementStyle="{StaticResource Centering}"
                                                Binding="{Binding LastModifiedDateTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu StaysOpen="False">
                                <MenuItem Header="Open"
                                          Command="{Binding OpenItemCommand}"
                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          Height="35" />
                                <MenuItem Header="Copy path to clipboard"
                                          Command="{Binding CopyItemPathCommand}"
                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          Height="35" />
                                <MenuItem Header="Rename"
                                          Command="{Binding RenameItemCommand}"
                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          Height="35" />
                                <MenuItem Header="Delete"
                                          Command="{Binding DeleteItemCommand}"
                                          CommandParameter="{Binding Path=PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          Height="35" />
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                    <!--<Image gif:ImageBehavior.AnimatedSource="/CDM;component/Resources/loading.gif"
                                       Grid.Row="3" HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Visibility="{Binding CurSearchStatus.IsLoadingItems,Converter={StaticResource BoolVisibilityConverter}}"
                                       Width="40" Height="8" Margin="0,10,0,10" />-->
                </Grid>

                <!--Rename Window-->
                <Grid Grid.Row="2"
                      Name="RenameWindow"
                      Visibility="{Binding CurRenameStatus.IsDoing, Converter={StaticResource BoolVisibilityConverter}}">
                    <Grid.Background>
                        <SolidColorBrush Color="LightGray"
                                         Opacity="0.5" />
                    </Grid.Background>
                    <Border Margin="0 0 0 0"
                            BorderThickness="1"
                            BorderBrush="#6b6b6b"
                            CornerRadius="3"
                            Width="300"
                            Height="120"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Background="{DynamicResource WindowBackgroundColor}">
                        <Grid Margin="5 5 5 5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"></RowDefinition>
                                <RowDefinition Height="30"></RowDefinition>
                                <RowDefinition Height="50"></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Rename"
                                       Grid.Row="0"
                                       Grid.Column="0"
                                       Grid.ColumnSpan="3"
                                       Foreground="{DynamicResource WindowForegroundColor}">
                            </TextBlock>
                            <Button Grid.Row="0"
                                    Grid.Column="3"
                                    HorizontalAlignment="Right"
                                    Command="{Binding CancelRenameCommand}"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Foreground="{DynamicResource WindowForegroundColor}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <TextBlock Text="×">
                                        </TextBlock>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver"
                                                     Value="True">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>

                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                                <Trigger.ExitActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>

                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.ExitActions>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <TextBox Grid.Row="1"
                                     Grid.Column="0"
                                     Grid.ColumnSpan="4"
                                     MinLines="1"
                                     MaxLines="1"
                                     Background="#B0B0B0"
                                     Name="txtRename"
                                     Text="{Binding CurRenameStatus.Name, Mode = TwoWay, UpdateSourceTrigger = PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="TextChanged">
                                        <i:InvokeCommandAction Command="{Binding RenameTextChangedCommand}"></i:InvokeCommandAction>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                            <Popup Name="tipRenameError"
                                   IsOpen="{Binding CurRenameStatus.IsError}"
                                   PlacementTarget="{Binding ElementName=txtRename}"
                                   Placement="Bottom"
                                   VerticalOffset="-1">
                                <Border Margin="0 0 0 0"
                                        BorderThickness="1"
                                        BorderBrush="#6b6b6b"
                                        CornerRadius="3"
                                        Width="400"
                                        Height="30"
                                        VerticalAlignment="Stretch"
                                        HorizontalAlignment="Stretch"
                                        Background="{DynamicResource WindowBackgroundColor}">
                                    <TextBlock Text="{Binding CurRenameStatus.Desc}"
                                               Name="txtRenameError"
                                               Foreground="#E6B6B4"
                                               Padding="5">
                                    </TextBlock>
                                </Border>
                            </Popup>
                            <Button Grid.Row="2"
                                    Grid.Column="2"
                                    IsDefault="True"
                                    Visibility="{Binding CurRenameStatus.IsError, Converter={StaticResource BoolVisibilityInverseConverter}}"
                                    HorizontalAlignment="Right"
                                    Cursor="Hand"
                                    BorderThickness="0"
                                    Command="{Binding DoRenameCommand}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border Width="60"
                                                Height="25"
                                                BorderThickness="1"
                                                CornerRadius="3"
                                                BorderBrush="#929292"
                                                Background="#B0B0B0">
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Text="OK"></TextBlock>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <Button Grid.Row="2"
                                    Grid.Column="3"
                                    IsCancel="True"
                                    HorizontalAlignment="Right"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Command="{Binding CancelRenameCommand}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border Width="60"
                                                Height="25"
                                                BorderThickness="1"
                                                CornerRadius="3"
                                                BorderBrush="#929292"
                                                Background="#B0B0B0">
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Text="Cancel"></TextBlock>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Grid>

        <Grid Grid.Row="1"
              Visibility="{Binding Offline,Converter={StaticResource BoolVisibilityConverter}}">
            <Grid.Background>
                <SolidColorBrush Color="LightGray"
                                 Opacity="0.5" />
            </Grid.Background>
        </Grid>
    </Grid>
</UserControl>